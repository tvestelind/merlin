sudo: required

language: c

services:
  - docker

addons:
  apt:
    packages:
    - autoconf
    - automake
    - check
    - docker-engine
    - gcc
    - gperf
    - help2man
    - libdbi-dev
    - libglib2.0-dev
    - libtool
    - unzip
    - wget

before_script:
  - wget https://github.com/naemon/naemon-core/archive/master.zip
  - unzip master.zip
  - pushd naemon-core-master && autoreconf --install --force && ./configure && make && sudo make install && popd
  - autoreconf --install --force

script:
  - ./configure && make && time FEATURE_TESTS="binlog.feature.json check_result_output.feature.json config_sync_poller.feature.json connection.feature.json execute_host_checks.feature.json hostgroup_split.feature.json ipc_nodeinfo_version.feature.json livestatus.feature.json peer_nodeinfo_version.feature.json report_data_host_active.feature.json report_data_service_active.feature.json retention_data_oconf_hash.feature.json" make -j int-test
